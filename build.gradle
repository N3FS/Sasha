plugins {
    id "java"
    id "com.github.johnrengelman.shadow" version "5.1.0"
    id "net.kyori.blossom" version "1.1.0"
}

group "uk.co.n3fs"
version "0.1"

sourceCompatibility = 1.8
targetCompatibility = 1.8

repositories {
    mavenCentral()
    maven {
        name "velocity"
        url "https://repo.velocitypowered.com/snapshots/"
    }
    maven {
        name "aikar"
        url "https://repo.aikar.co/content/groups/aikar/"
    }
}

dependencies {
    compileOnly "com.velocitypowered:velocity-api:1.0.4-SNAPSHOT"
    annotationProcessor "com.velocitypowered:velocity-api:1.0.4-SNAPSHOT"

    compile "co.aikar:idb-core:1.0.0-SNAPSHOT"
    compile "com.zaxxer:HikariCP:2.4.1"
    compile "com.h2database:h2:1.4.199"
}

shadowJar {
    relocate "co.aikar.idb", "uk.co.n3fs.sasha.lib.idb"
    relocate "com.zaxxer.hikari", "uk.co.n3fs.sasha.lib.hikari"
    relocate "org.h2", "uk.co.n3fs.sasha.lib.h2"

    dependencies {
        exclude(dependency("org.slf4j:slf4j-api:"))
    }
}

blossom {
    replaceToken "@VERSION@", version, "src/main/java/uk/co/n3fs/sasha/SashaPlugin.java"
}

build.dependsOn shadowJar
